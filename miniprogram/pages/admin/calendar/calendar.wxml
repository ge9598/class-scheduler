<view class="container">
  <!-- 筛选栏 -->
  <van-dropdown-menu active-color="var(--accent-color)">
    <van-dropdown-item
      value="{{ filterTeacherId }}"
      options="{{ teacherOptions }}"
      bind:change="onTeacherFilter"
    />
    <van-dropdown-item
      value="{{ filterCourseId }}"
      options="{{ courseOptions }}"
      bind:change="onCourseFilter"
    />
  </van-dropdown-menu>

  <!-- 日历组件 -->
  <calendar
    markedDates="{{ markedDates }}"
    selectedDate="{{ selectedDate }}"
    bind:dayclick="onDayClick"
    bind:monthchange="onMonthChange"
  />

  <!-- 加载中 -->
  <view class="loading-wrap" wx:if="{{ loading }}">
    <van-loading size="24px" color="var(--accent-color)">加载中...</van-loading>
  </view>

  <!-- 当天课程列表 -->
  <view class="day-lessons" wx:if="{{ !loading && dayLessons.length > 0 }}">
    <view class="section-title">{{ selectedDate }} 共 {{ dayLessons.length }} 节课</view>
    <lesson-card
      wx:for="{{ dayLessons }}"
      wx:key="_id"
      lesson="{{ item }}"
      mode="admin"
    />
  </view>

  <!-- 空状态 -->
  <van-empty
    wx:if="{{ !loading && dayLessons.length === 0 && selectedDate }}"
    description="当天暂无课程"
  />
</view>
